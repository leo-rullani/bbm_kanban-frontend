<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: dashboard/dashboard_charts.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: dashboard/dashboard_charts.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * Draws a pie chart (doughnut) representing the status of assigned tickets.
 * If no tickets are assigned, displays a placeholder message.
 * @param {Array&lt;number>} currentAssignedTickets - Array with ticket counts for each status.
 */
function drawPieChart(currentAssignedTickets) {
    let ticketData = getPieChartData(currentAssignedTickets)
    let labels = ['To-do', 'In progress', 'Review', 'Done'];

    if (ticketData.every(val => val === 0)) {
        ticketData = [1];
        labels = ['No tasks assigned'];
    }

    const ctx = document.getElementById('ticketsChart').getContext('2d');
    new Chart(ctx, {
        type: 'doughnut',
        data: {
            labels: labels,
            datasets: [{
                data: ticketData,
                backgroundColor: ['#8E44AD', '#F1C40F', '#E67E22', '#3498DB'],
                borderWidth: 0
            }]
        },
        options: {
            responsive: true,
            plugins: {
                legend: {
                    position: 'bottom',
                    labels: {
                        color: 'white',
                        usePointStyle: true,
                        pointStlye: 'circle',
                    }
                }
            }
        }
    });
};

/**
 * Returns an array of ticket counts for each status used in the pie chart.
 * @param {Array&lt;Object>} currentAssignedTickets - Array of ticket objects with a status property.
 * @returns {Array&lt;number>} Array with counts for ['to-do', 'in-progress', 'review', 'done'].
 */
function getPieChartData(currentAssignedTickets) {
    return [
        currentAssignedTickets.filter(task => task.status == "to-do").length,
        currentAssignedTickets.filter(task => task.status == "in-progress").length,
        currentAssignedTickets.filter(task => task.status == "review").length,
        currentAssignedTickets.filter(task => task.status == "done").length,
    ]
}

/**
 * Draws a custom wave chart to visualize the progress percentage.
 * If progress is invalid, displays a fallback message.
 * @param {number} progress - The progress value (expected between 0 and 100).
 */
function drawWaveChart(progress) {
    let progressIsValid = true;
    if (progress &lt; 0 || progress > 100 || isNaN(progress)) {
        progress = 0;
        progressIsValid = false;
    }
    const ctx = document.getElementById("waveChart").getContext("2d");
    const wavePlugin = {
        id: 'waveProgress',
        beforeDraw(chart) {
            const { ctx, chartArea: { left, right, top, bottom }, scales: { x } } = chart;
            const width = right - left;
            const height = bottom - top;
            const progressX = left + (width * (progress / 100));

            ctx.save();

            // Wave strokes
            function drawWave(color, startX, endX) {
                ctx.beginPath();
                ctx.moveTo(startX, bottom - height / 2);
                const waveLength = 90;  // Wavelength
                const amplitude = 10;   // Wavehight

                for (let x = startX; x &lt;= endX; x += 2) {
                    const y = bottom - height / 2 + Math.sin((x / waveLength) * Math.PI * 2) * amplitude;
                    ctx.lineTo(x, y);
                }

                ctx.lineWidth = 8;
                ctx.strokeStyle = color;
                ctx.stroke();
            }

            drawWave("#FFD700", left, progressX);
            drawWave("#345678", progressX, right);

            // Progress Text - Currently aligned in center
            ctx.fillStyle = "#FFD700";
            ctx.font = "16px Arial";
            ctx.textAlign = "center";
            let text = progressIsValid ? progress.toFixed(2) + "%" : "No Tasks found";
            ctx.fillText(text, left + width / 2, bottom - height / 2 - 20);

            // Numbers left and right
            ctx.fillStyle = "#ffffff";
            ctx.font = "14px Arial";
            ctx.textAlign = "left";
            ctx.fillText("0", left, bottom);
            ctx.textAlign = "right";
            ctx.fillText("100", right, bottom);

            ctx.restore();
        }
    };

    new Chart(ctx, {
        type: "bar",
        data: {
            labels: ["Fortschritt"],
            datasets: [{
                label: "Tasks Resolved",
                data: [progress],
                backgroundColor: "rgba(0, 0, 0, 0)",
                borderWidth: 0
            }]
        },
        options: {
            responsive: true,
            maintainAspectRatio: false,
            height: 100,
            plugins: {
                legend: { display: false }
            },
            scales: {
                x: { display: false },
                y: { display: false }
            }
        },
        plugins: [wavePlugin]
    });
    ;
}</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#DEFAULT_END">DEFAULT_END</a></li><li><a href="global.html#DEFAULT_LOCATION">DEFAULT_LOCATION</a></li><li><a href="global.html#DEFAULT_START">DEFAULT_START</a></li><li><a href="global.html#IMG_PATH">IMG_PATH</a></li><li><a href="global.html#STORE_KEY">STORE_KEY</a></li><li><a href="global.html#THRESHOLD">THRESHOLD</a></li><li><a href="global.html#boardCreateCheckMailAddress">boardCreateCheckMailAddress</a></li><li><a href="global.html#boardCreateInviteMember">boardCreateInviteMember</a></li><li><a href="global.html#boardCreateSubmit">boardCreateSubmit</a></li><li><a href="global.html#boardList">boardList</a></li><li><a href="global.html#buildTaskPdfHtml">buildTaskPdfHtml</a></li><li><a href="global.html#cancelCreateBoard">cancelCreateBoard</a></li><li><a href="global.html#createBoard">createBoard</a></li><li><a href="global.html#currenTaskFilter">currenTaskFilter</a></li><li><a href="global.html#currentAssignedTickets">currentAssignedTickets</a></li><li><a href="global.html#currentBoards">currentBoards</a></li><li><a href="global.html#currentCreateBoard">currentCreateBoard</a></li><li><a href="global.html#currentReviewerTickets">currentReviewerTickets</a></li><li><a href="global.html#deleteBoard">deleteBoard</a></li><li><a href="global.html#downloadDebriefingPdf">downloadDebriefingPdf</a></li><li><a href="global.html#drawPieChart">drawPieChart</a></li><li><a href="global.html#drawWaveChart">drawWaveChart</a></li><li><a href="global.html#escapeHtml">escapeHtml</a></li><li><a href="global.html#exportTaskPdfFromCard">exportTaskPdfFromCard</a></li><li><a href="global.html#formatDate">formatDate</a></li><li><a href="global.html#formatDateNice">formatDateNice</a></li><li><a href="global.html#getAndRenderBoardList">getAndRenderBoardList</a></li><li><a href="global.html#getAndRenderRequestList">getAndRenderRequestList</a></li><li><a href="global.html#getAssignedTasks">getAssignedTasks</a></li><li><a href="global.html#getBoardCardMoveBtnTemplate">getBoardCardMoveBtnTemplate</a></li><li><a href="global.html#getBoardCardTemplate">getBoardCardTemplate</a></li><li><a href="global.html#getBoardlistEntrieTemplate">getBoardlistEntrieTemplate</a></li><li><a href="global.html#getBoards">getBoards</a></li><li><a href="global.html#getDetailTaskPersonTemplate">getDetailTaskPersonTemplate</a></li><li><a href="global.html#getMemberListTemplate">getMemberListTemplate</a></li><li><a href="global.html#getNearestDueDateTask">getNearestDueDateTask</a></li><li><a href="global.html#getPdfCss">getPdfCss</a></li><li><a href="global.html#getPieChartData">getPieChartData</a></li><li><a href="global.html#getRequestListEntryTemplate">getRequestListEntryTemplate</a></li><li><a href="global.html#getReviewerTasks">getReviewerTasks</a></li><li><a href="global.html#getSingleCommmentTemplate">getSingleCommmentTemplate</a></li><li><a href="global.html#getSingleTaskTemplate">getSingleTaskTemplate</a></li><li><a href="global.html#getTaskCreateMemberListEntrieTemplate">getTaskCreateMemberListEntrieTemplate</a></li><li><a href="global.html#getTaskListTemplate">getTaskListTemplate</a></li><li><a href="global.html#hydrateFromStorage">hydrateFromStorage</a></li><li><a href="global.html#init">init</a></li><li><a href="global.html#initPortfolioMarquee">initPortfolioMarquee</a></li><li><a href="global.html#isLoadingTasks">isLoadingTasks</a></li><li><a href="global.html#isSflDebriefBoard">isSflDebriefBoard</a></li><li><a href="global.html#loadHtml2Pdf">loadHtml2Pdf</a></li><li><a href="global.html#openBoardCreateDialog">openBoardCreateDialog</a></li><li><a href="global.html#persistStatus">persistStatus</a></li><li><a href="global.html#readCssVars">readCssVars</a></li><li><a href="global.html#redirectToBoard">redirectToBoard</a></li><li><a href="global.html#redirectToBoardWTask">redirectToBoardWTask</a></li><li><a href="global.html#redirectToBoards">redirectToBoards</a></li><li><a href="global.html#removeCurrentMember">removeCurrentMember</a></li><li><a href="global.html#renderBoardList">renderBoardList</a></li><li><a href="global.html#renderCreateDialogMemberList">renderCreateDialogMemberList</a></li><li><a href="global.html#renderDashboard">renderDashboard</a></li><li><a href="global.html#renderMemberAndTaskCount">renderMemberAndTaskCount</a></li><li><a href="global.html#renderRequestList">renderRequestList</a></li><li><a href="global.html#renderStatusBtn">renderStatusBtn</a></li><li><a href="global.html#renderStatusTable">renderStatusTable</a></li><li><a href="global.html#renderTaskList">renderTaskList</a></li><li><a href="global.html#renderUrgentTask">renderUrgentTask</a></li><li><a href="global.html#renderWelcomeMessage">renderWelcomeMessage</a></li><li><a href="global.html#requestList">requestList</a></li><li><a href="global.html#resetMailError">resetMailError</a></li><li><a href="global.html#safePreview">safePreview</a></li><li><a href="global.html#sampleRequests">sampleRequests</a></li><li><a href="global.html#sanitizeFilename">sanitizeFilename</a></li><li><a href="global.html#setDashboardData">setDashboardData</a></li><li><a href="global.html#setStatus">setStatus</a></li><li><a href="global.html#toggleTicketsTypeSwitch">toggleTicketsTypeSwitch</a></li><li><a href="global.html#updateBoard">updateBoard</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.4</a> on Fri Aug 15 2025 19:05:43 GMT+0200 (Mitteleuropäische Sommerzeit)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
